#summary Protocol used for communicating with the thermostat
#labels Featured,Phase-Implementation

= Heatmiser V3 System Protocol =

Heatmiser Wi-Fi thermostats expose two interfaces accessible via TCP/IP: an embedded web server running on port 80, and an "iPhone" interface on port 8068. The latter interface is used by this software. It is a variant of the Heatmiser V3 System Protocol, running over TCP/IP rather than a serial link. For the RS485 variant of the protocol see Neil Trimboy's [http://code.google.com/p/heatmiser-monitor-control heatmiser-monitor-control] project.

[http://www.heatmiser.co.uk/web/index.php/docs/viewcategory/14-custom-integration Heatmiser V3 System Protocol documentation]

== Documentation Errors ==

The original version (V3.1) of Heatmiser's System Protocol documentation contained many errors and ambiguities. Most of these have been rectified in the current version (V3.9), but a few remain in the details of the "DCB structure" that provides the thermostat's configuration and status. The correct details were determined by analysing the data returned by PRT-TS and PRT/HW-TS Wi-Fi thermostats. There are presumably similar errors in the documentation for other models.
 * When multi-octet values are read (notably the length and temperature measurements) the less significant octet appears first. For all such values, except the DCB length field, the more significant octet appears at the address stated in the documentation with the less significant octet at the preceding address. There is a note in the documentation that "the Wi-Fi thermostat is little-endian" but this is not reflected in the DCB format descriptions.
 * The switching differential is specified as being in the range 1-3, but is actually in the range 1-6 in units of 0.5Â°C.

Additional corrections, especially for other models (DT-TS Wi-Fi and TM1-TS Wi-Fi), will be gratefully received.